# 🚀 理财计算器 - 快速开始部署（方案3：完整部署）

## 📌 准备工作

✅ 已完成的工作：
- ✅ Next.js应用已构建完成
- ✅ Vercel配置文件已创建
- ✅ 微信小程序代码已准备
- ✅ 部署文档已编写

## 🎯 部署流程概览

```
步骤1 → 步骤2 → 步骤3 → 步骤4 → 步骤5
Vercel → 小程序 → 配置 → 测试 → 上线
```

---

## 📖 详细步骤

### 步骤1: 部署到Vercel（5-10分钟）

**最简单的方法：使用Vercel CLI**

```bash
# 1. 安装Vercel CLI
npm i -g vercel

# 2. 登录
vercel login

# 3. 部署
vercel
```

**按照提示操作：**
- 问"Set up..." → 按`Enter`
- 问"Link to..." → 输入`n`，按`Enter`
- 问"What's your project's name?" → 输入`finance-calculator`，按`Enter`
- 等待部署完成

**完成！**复制Vercel返回的网址，例如：
```
https://finance-calculator-abc123.vercel.app
```

---

### 步骤2: 注册微信小程序（5分钟）

1. 访问：https://mp.weixin.qq.com/
2. 点击"立即注册" → 选择"小程序"
3. 填写邮箱、密码，注册账号
4. 邮箱验证后登录

---

### 步骤3: 完善小程序信息（3分钟）

1. 填写基本信息：
   - 名称：`理财计算器`
   - 简介：`专业理财计算工具`
   - 类目：工具 → 计算工具
2. 记录AppID（在"开发设置"页面）

---

### 步骤4: 创建小程序项目（5分钟）

1. 下载微信开发者工具
   - Windows: https://developers.weixin.qq.com/miniprogram/dev/devtools/download.html

2. 安装后打开，用微信扫码登录

3. 新建项目：
   - 项目名称：`理财计算器`
   - 目录：选择一个空文件夹
   - AppID：粘贴你的AppID
   - 模板：JavaScript → 基础模板

4. **复制代码到项目：**
   - 打开项目下的`wechat-miniprogram`文件夹
   - 将所有文件复制到你的小程序项目目录
   - 覆盖默认生成的文件

5. **修改web-view地址：**
   - 打开`pages/index/index.wxml`
   - 找到这一行：
     ```xml
     <web-view src="https://你的Vercel域名.vercel.app"></web-view>
     ```
   - 替换为你的实际Vercel网址，例如：
     ```xml
     <web-view src="https://finance-calculator-abc123.vercel.app"></web-view>
     ```

---

### 步骤5: 配置业务域名（关键步骤！）

**⚠️ 这一步必须做，否则无法访问网站**

1. 登录小程序管理后台
2. 开发 → 开发管理 → 开发设置
3. 找到"业务域名"，点击"修改"
4. 输入你的Vercel域名（不含https://），例如：
   ```
   finance-calculator-abc123.vercel.app
   ```
5. 点击"确定"，下载验证文件（类似`MP_verify_xxxx.txt`）

**上传验证文件到Vercel项目：**

6. 在你的项目根目录，找到或创建`public`文件夹
7. 将验证文件放入`public`文件夹
8. 重新部署到Vercel：
   ```bash
   vercel --prod
   ```
9. 回到小程序后台，点击"确认"

**完成！**业务域名配置成功。

---

### 步骤6: 测试小程序（5分钟）

1. 在微信开发者工具中，点击"编译"
2. 检查右侧预览区是否显示理财计算器
3. 点击"预览"，用手机微信扫码
4. 在手机上测试所有功能：
   - 简单计算器
   - 复利年金计算器
   - IRR计算器

---

### 步骤7: 提交审核发布（10分钟）

1. 在微信开发者工具中，点击"上传"
2. 填写版本号：`1.0.0`
3. 填写备注：理财计算器上线版本

4. 登录小程序管理后台
5. 版本管理 → 开发版本
6. 点击"提交审核"
7. 等待审核（1-3个工作日）

8. 审核通过后，点击"发布"

**🎉 恭喜！小程序正式上线！**

---

## ✅ 检查清单

部署完成后，请确认：

- [ ] Vercel网站能正常访问
- [ ] 业务域名已配置并验证通过
- [ ] web-view能正常加载理财计算器
- [ ] 三个计算器功能都正常
- [ ] 图表显示正常
- [ ] 手机预览效果良好

---

## 📚 详细文档

如果需要更详细的说明，请查看：

- **完整部署指南**：`微信小程序完整部署指南.md`
- **小程序代码说明**：`wechat-miniprogram/README.md`

---

## 🔧 常见问题

### Q: web-view显示"不在业务域名中"

**A:** 检查以下几点：
1. 业务域名是否配置正确（不包含https://）
2. 验证文件是否上传到public文件夹
3. 是否重新部署了Vercel

### Q: Vercel部署失败

**A:** 确保使用`pnpm`而不是`npm`，检查`vercel.json`配置

### Q: 小程序审核被拒

**A:** 常见原因：
- 类目选择错误（应选择"工具 → 计算工具"）
- 功能描述不清晰
- 缺少隐私政策

---

## 📞 需要帮助？

- Vercel文档：https://vercel.com/docs
- 微信小程序文档：https://developers.weixin.qq.com/miniprogram/dev/framework/

---

**祝部署顺利！** 🚀
